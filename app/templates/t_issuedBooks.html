{% extends "base.html" %}

{% block content %}

<h2>Issued Books</h2>

<table border="1" cellpadding="10">

<tr>

<th>ID</th>

<th>Title</th>

<th>Author</th>

<th>Status</th>

<th>Action</th>

</tr>


{% for book in books %}

<tr>

<td>{{book.id}}</td>

<td>{{book.title}}</td>

<td>{{book.author_name}}</td>

<td>{{book.status}}</td>

<td>

<button onclick="returnBook('{{book.id}}')">

Return Book

</button>

</td>

</tr>

{% endfor %}

</table>


<script>

function returnBook(id){

fetch(`/return_book/${id}/`,{

method:"PUT"

})
.then(res=>res.json())
.then(data=>{

alert(data.msg)

location.reload()

})

}

</script>


{% endblock %}