{% load static %}
<!DOCTYPE html>
<html>

<head>

<title>Issue / Return Book</title>

<style>

body{
background:linear-gradient(to right,#667eea,#764ba2);
font-family:Arial;
margin:0;
}

h1{
text-align:center;
color:white;
padding:20px;
}

.container{
width:90%;
margin:auto;
background:white;
padding:20px;
border-radius:10px;
box-shadow:0 0 15px rgba(0,0,0,0.3);
}

table{
width:100%;
border-collapse:collapse;
}

th{
background:#4e73df;
color:white;
padding:10px;
}

td{
padding:10px;
text-align:center;
border-bottom:1px solid #ddd;
}

button{
padding:7px 14px;
border:none;
border-radius:5px;
color:white;
font-weight:bold;
cursor:pointer;
}

.issue-btn{ background:#28a745; }

.return-btn{ background:#dc3545; }

.available{ color:green; font-weight:bold; }

.issued{ color:red; font-weight:bold; }

</style>

</head>


<body>

<h1>ðŸ“š Issue / Return Book</h1>


<div class="container">

<table>


<tr>

<th>ID</th>

<th>Title</th>

<th>Status</th>

<th>Action</th>

</tr>



{% for book in books %}

<tr>


<td>{{book.id}}</td>


<td>{{book.title}}</td>



<td class="{% if book.status == 'Issued' %}issued{% else %}available{% endif %}">

{{book.status}}

</td>



<td>


{% if book.status == "Available" %}

<button class="issue-btn"

onclick="issueBook('{{book.id}}')">

Issue

</button>


{% else %}


<button class="return-btn"

onclick="returnBook('{{book.id}}')">

Return

</button>


{% endif %}


</td>


</tr>


{% endfor %}



</table>


</div>



<script>


function issueBook(id){

fetch(`/issue_book/${id}/`,{

method:"PUT"

})
.then(res=>res.json())
.then(data=>{

alert(data.msg)

location.reload()

})

}



function returnBook(id){

fetch(`/return_book/${id}/`,{

method:"PUT"

})
.then(res=>res.json())
.then(data=>{

alert(data.msg)

location.reload()

})

}


</script>


</body>

</html>